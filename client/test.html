<html lang="en" >
   <head>
      <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.css">
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-aria.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-messages.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/angular_material/1.0.0/angular-material.min.js"></script>
	  <script language="javascript">
        angular
           .module('ppdb', ['ngMaterial'])
           .controller('autoCompleteController', autoCompleteController);

        function autoCompleteController ($timeout, $q, $log) {
           var self = this;

           self.isDisabled    = false;
           self.titles        = loadTitles();
           self.querySearch   = querySearch;
           self.selectedItemChange = selectedItemChange;
           self.searchTextChange   = searchTextChange;

           function querySearch (query) {
              var results = query ? self.titles.filter( createFilterFor(query) ) : self.titles, deferred;
                return results;
           }
           function searchTextChange(text) {
              $log.info('Text changed to ' + text);
           }
           function selectedItemChange(item) {
              $log.info('Item changed to ' + JSON.stringify(item));
           }
           //build list of titles as map of key-value pairs
           function loadTitles() {

              var allTitles = 'Alabama, Alaska, Arizona, Arkansas, California, Colorado, Connecticut, Delaware,\
                 Florida, Georgia, Hawaii, Idaho, Illinois, Indiana, Iowa, Kansas, Kentucky, Louisiana,\
                 Maine, Maryland, Massachusetts, Michigan, Minnesota, Mississippi, Missouri, Montana,\
                 Nebraska, Nevada, New Hampshire, New Jersey, New Mexico, New York, North Carolina,\
                 North Dakota, Ohio, Oklahoma, Oregon, Pennsylvania, Rhode Island, South Carolina,\
                 South Dakota, Tennessee, Texas, Utah, Vermont, Virginia, Washington, West Virginia,\
                 Wisconsin, Wyoming';
              return allTitles.split(/, +/g).map( function (title) {
                 return {
                    value: title.toLowerCase(),
                    display: title
                 };
              });
           }
           //filter function for search query
           function createFilterFor(query) {
              var lowercaseQuery = angular.lowercase(query);
              return function filterFn(title) {
                return (title.value.indexOf(lowercaseQuery) === 0);
              };
           }
        }  
	  </script>      
   </head>
   <body ng-app="ppdb" ng-cloak>
      <div ng-controller="autoCompleteController as Search" layout="column" ng-cloak>
         <md-content class="md-padding">
            <form ng-submit="$event.preventDefault()">
               <md-autocomplete
                  ng-disabled="Search.isDisabled"
                  md-no-cache="Search.noCache"
                  md-selected-item="Search.selectedItem"
                  md-search-text-change="Search.searchTextChange(Search.searchText)"
                  md-search-text="Search.searchText"
                  md-selected-item-change="Search.selectedItemChange(item)"
                  md-items="item in Search.querySearch(Search.searchText)"
                  md-item-text="item.display"
                  md-min-length="0"
                  placeholder="Podcast?">
                  <md-item-template>
                     <span md-highlight-text="Search.searchText" md-highlight-flags="^i">{{item.display}}</span>
                  </md-item-template>
                  <md-not-found>
                     No podcasts matching "{{Search.searchText}}" were found.
                  </md-not-found>
               </md-autocomplete>
               <br/>

            </form>
         </md-content>
      </div>
   </body>
</html>